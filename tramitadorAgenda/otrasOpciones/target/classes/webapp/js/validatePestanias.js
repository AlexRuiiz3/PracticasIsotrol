function configuracionValidaciones(){$.validator.setDefaults({errorClass:"errorLabel"});$.validator.addMethod("nif",function(b,a){return this.optional(a)||validarNIFNIE(b)});$.validator.addMethod("beforeToday",function(b,a){return this.optional(a)||validaFechasAnterior(b)});$.validator.addMethod("afterToday",function(b,a){return this.optional(a)||validaFechasPosterior(b)});$.validator.addMethod("dateEU",function(b,a){return this.optional(a)||/^(0[1-9]|1\d|2\d|3[01])\/(0[1-9]|1[0-2])\/(19|20)\d{2}$/.test(b)});validacionesDatosGenerales();validacionesSubsanaciones()}function validacionesDatosGenerales(){$("#formDatosGenerales").validate({rules:{"datosGeneralesDTO.numExpInterno":{maxlength:19},"datosGeneralesDTO.fechaEntrada":{dateEU:true,beforeToday:true},"datosGeneralesDTO.fechaRegistro":{dateEU:true,beforeToday:true},"datosGeneralesDTO.lugarRegistro":{maxlength:50},"datosGeneralesDTO.fechaPagoSubvencion":{dateEU:true,beforeToday:true},"datosGeneralesDTO.pais":{maxlength:72},"datosGeneralesDTO.apellidosSol":{maxlength:50},"datosGeneralesDTO.nombreSol":{maxlength:50},"datosGeneralesDTO.nifSol":{nif:true,maxlength:9},"datosGeneralesDTO.observaciones":{maxlength:4000},"datosGeneralesDTO.motivoDesestimacion":{maxlength:4000},"datosGeneralesDTO.plazoEjec":{maxlength:8},"datosGeneralesDTO.tituloProy":{maxlength:100}},errorPlacement:function(a,b){if(b.attr("name")==="datosGeneralesDTO.fechaEntrada"||b.attr("name")==="datosGeneralesDTO.fechaRegistro"||b.attr("name")==="datosGeneralesDTO.fechaPagoSubvencion"||b.attr("name")==="datosGeneralesDTO.fechaInicioPrevista"){aniadirLabelErrorFecha(b,a)}else{b.after(a)}}})}function validacionesSubsanaciones(){$("#formDatosSubsanacion").validate({rules:{fechaEntrega:{dateEU:true,beforeToday:true},fechaRegistro:{dateEU:true,beforeToday:true}},errorPlacement:function(a,b){if(b.attr("name")==="fechaEntrega"||b.attr("name")==="fechaRegistro"){aniadirLabelErrorFecha(b,a)}else{b.after(a)}}})}function validarNIFNIE(b){var c,d,a;var e=/^[XYZ]?\d{5,8}[A-Z]$/;b=b.toUpperCase();if(e.test(b)===true){c=b.substr(0,b.length-1);c=c.replace("X",0);c=c.replace("Y",1);c=c.replace("Z",2);d=b.substr(b.length-1,1);c=c%23;a="TRWAGMYFPDXBNJZSQVHLCKET";a=a.substring(c,c+1);if(a!=d){return false}else{return true}}else{return false}}function validaFechasAnterior(a){var b=new Date();var c=a.split("/");var d=new Date(+c[2],c[1]-1,+c[0]);return new Date(d)<=b}function validaFechasPosterior(a){var b=new Date();var c=a.split("/");var d=new Date(+c[2],c[1]-1,+c[0]);return new Date(d)>=b}function aniadirLabelErrorFecha(b,a){if(typeof a==="string"){b.parent().parent().children().last().append('<label for="'+b.attr("id")+'" class="errorLabel" style="display:inline">'+a+"</label>")}else{b.parent().parent().children().last().append(a)}};